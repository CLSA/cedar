{##
 # word_view.twig
 #
 # View word details.
 # @author Dean Inglis <inglisd@mcmaster.ca>
 # @see base_view.twig for parameters
 #}
{% extends "base_view.twig" %}

{% block javascript %}
  {{ parent() }}
  <script type="text/javascript">
    $( function() {
      $( "#{{ widget.full }}_dialog__correct" ).dialog( {
        title: "Correct Misspelling",
        modal: true,
        width: 450,
        autoOpen: false,
        buttons: {
          Ok: function() {
            var args = { word_id: {{ id }}, correction: $( "#{{ widget.full }}__correction" ).val() };
            if( ajax_push( "word", "correct", args ) ) {
              $(this).dialog( "close" );
              window.location.reload();
            }
          },
          Cancel: function() {
            $(this).dialog( "close" );
          }
        }
      } );

      $( "#{{ widget.full }}__correct" ).click( function() {
        $( "#{{ widget.full }}_dialog__correct" ).dialog( "open" );
      } );
    } );
  </script>
{% endblock javascript %}

{% block record %}
  {{ parent() }}
  <div id="{{ widget.full }}_dialog__correct">
    <table>
      <tr>
        <td class="content" colspan="2" style="padding-bottom:16px">
          Please provide the correct spelling for this word.  Once you click the "Ok" button the word will
          be added to the associated primary dictionary, all uses of this word will be converted to the
          correctly spelled word and this word will be transferred to the associated misspelled dictionary.
        </td>
      </tr>
      <tr>
        <td class="heading">Correct spelling:</td>
        <td class="content">
          <input id="{{ widget.full }}__correction" type="input" style="width:99%" />
        </td>
      </tr>
    </table>
    <div class="ui-state-error" style="margin-top:16px">
      Note: this operation cannot be undone so be sure you have to correct spelling before clicking "Ok".
    </div>
  </div>
{% endblock record %}
